{"remainingRequest":"C:\\Users\\pc\\Desktop\\projects\\book-mgr\\book-mgr-fe\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\pc\\Desktop\\projects\\book-mgr\\book-mgr-fe\\src\\views\\Books\\Update\\index.js?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\pc\\Desktop\\projects\\book-mgr\\book-mgr-fe\\src\\views\\Books\\Update\\index.js","mtime":1613235288963},{"path":"C:\\Users\\pc\\Desktop\\projects\\book-mgr\\book-mgr-fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610436750386},{"path":"C:\\Users\\pc\\Desktop\\projects\\book-mgr\\book-mgr-fe\\node_modules\\babel-loader\\lib\\index.js","mtime":1610436747505}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3RvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL3BjL0Rlc2t0b3AvcHJvamVjdHMvYm9vay1tZ3IvYm9vay1tZ3ItZmUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgeyBkZWZpbmVDb21wb25lbnQsIHJlYWN0aXZlLCB3YXRjaCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IGJvb2sgfSBmcm9tICdAL3NlcnZpY2UnOwppbXBvcnQgeyBtZXNzYWdlIH0gZnJvbSAnYW50LWRlc2lnbi12dWUnOwppbXBvcnQgeyByZXN1bHQsIGNsb25lIH0gZnJvbSAnQC9oZWxwZXJzL3V0aWxzJzsKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwpleHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoewogIHByb3BzOiB7CiAgICBzaG93OiBCb29sZWFuLAogICAgYm9vazogT2JqZWN0CiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAocHJvcHMsIGNvbnRleHQpIHsKICAgIHZhciBlZGl0Rm9ybSA9IHJlYWN0aXZlKHsKICAgICAgbmFtZTogJycsCiAgICAgIHByaWNlOiAwLAogICAgICBhdXRob3I6ICcnLAogICAgICBwdWJsaXNoRGF0ZTogMCwKICAgICAgY2xhc3NpZnk6ICcnCiAgICB9KTsKCiAgICB2YXIgY2xvc2UgPSBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgY29udGV4dC5lbWl0KCd1cGRhdGU6c2hvdycsIGZhbHNlKTsKICAgIH07CgogICAgd2F0Y2goZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gcHJvcHMuYm9vazsKICAgIH0sIGZ1bmN0aW9uIChjdXJyZW50KSB7CiAgICAgIE9iamVjdC5hc3NpZ24oZWRpdEZvcm0sIGN1cnJlbnQpOwogICAgICBlZGl0Rm9ybS5wdWJsaXNoRGF0ZSA9IG1vbWVudChOdW1iZXIoZWRpdEZvcm0ucHVibGlzaERhdGUpKTsKICAgIH0pOwoKICAgIHZhciBzdWJtaXQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGJvb2sudXBkYXRlKHsKICAgICAgICAgICAgICAgICAgaWQ6IHByb3BzLmJvb2suX2lkLAogICAgICAgICAgICAgICAgICBuYW1lOiBlZGl0Rm9ybS5uYW1lLAogICAgICAgICAgICAgICAgICBwcmljZTogZWRpdEZvcm0ucHJpY2UsCiAgICAgICAgICAgICAgICAgIGF1dGhvcjogZWRpdEZvcm0uYXV0aG9yLAogICAgICAgICAgICAgICAgICBwdWJsaXNoRGF0ZTogZWRpdEZvcm0ucHVibGlzaERhdGUudmFsdWVPZigpLAogICAgICAgICAgICAgICAgICBjbGFzc2lmeTogZWRpdEZvcm0uY2xhc3NpZnkKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgcmVzdWx0KHJlcykuc3VjY2VzcyhmdW5jdGlvbiAoX3JlZjIpIHsKICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhOwogICAgICAgICAgICAgICAgICBjb250ZXh0LmVtaXQoJ3VwZGF0ZScsIGRhdGEpOwogICAgICAgICAgICAgICAgICBtZXNzYWdlLnN1Y2Nlc3MobXNnKTsKICAgICAgICAgICAgICAgICAgY2xvbmUoKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIHN1Ym1pdCgpIHsKICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOwoKICAgIHJldHVybiB7CiAgICAgIGVkaXRGb3JtOiBlZGl0Rm9ybSwKICAgICAgc3VibWl0OiBzdWJtaXQsCiAgICAgIHByb3BzOiBwcm9wcywKICAgICAgY2xvc2U6IGNsb3NlCiAgICB9OwogIH0KfSk7"},{"version":3,"sources":["C:/Users/pc/Desktop/projects/book-mgr/book-mgr-fe/src/views/Books/Update/index.js"],"names":["defineComponent","reactive","watch","book","message","result","clone","moment","props","show","Boolean","Object","setup","context","editForm","name","price","author","publishDate","classify","close","emit","current","assign","Number","submit","update","id","_id","valueOf","res","success","data","msg"],"mappings":";;;;AAAA,SAAQA,eAAR,EAAwBC,QAAxB,EAAiCC,KAAjC,QAA6C,KAA7C;AAEA,SAASC,IAAT,QAAqB,WAArB;AAEA,SAASC,OAAT,QAAwB,gBAAxB;AAEA,SAASC,MAAT,EAAiBC,KAAjB,QAA8B,iBAA9B;AAEA,OAAOC,MAAP,MAAmB,QAAnB;AAEA,eAAeP,eAAe,CAAC;AAC7BQ,EAAAA,KAAK,EAAE;AACJC,IAAAA,IAAI,EAAEC,OADF;AAEJP,IAAAA,IAAI,EAAEQ;AAFF,GADsB;AAM7BC,EAAAA,KAN6B,iBAMvBJ,KANuB,EAMjBK,OANiB,EAMT;AAChB,QAAMC,QAAQ,GAAGb,QAAQ,CAAC;AACxBc,MAAAA,IAAI,EAAC,EADmB;AAExBC,MAAAA,KAAK,EAAC,CAFkB;AAGxBC,MAAAA,MAAM,EAAC,EAHiB;AAIxBC,MAAAA,WAAW,EAAC,CAJY;AAKxBC,MAAAA,QAAQ,EAAC;AALe,KAAD,CAAzB;;AASF,QAAMC,KAAK,GAAG,SAARA,KAAQ,GAAM;AAClBP,MAAAA,OAAO,CAACQ,IAAR,CAAa,aAAb,EAA6B,KAA7B;AACD,KAFD;;AAIAnB,IAAAA,KAAK,CAAC;AAAA,aAAMM,KAAK,CAACL,IAAZ;AAAA,KAAD,EAAkB,UAACmB,OAAD,EAAa;AAElCX,MAAAA,MAAM,CAACY,MAAP,CAAcT,QAAd,EAAwBQ,OAAxB;AAEAR,MAAAA,QAAQ,CAACI,WAAT,GAAuBX,MAAM,CAACiB,MAAM,CAACV,QAAQ,CAACI,WAAV,CAAP,CAA7B;AAID,KARI,CAAL;;AAUA,QAAMO,MAAM;AAAA,yEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEKtB,IAAI,CAACuB,MAAL,CAAY;AAC1BC,kBAAAA,EAAE,EAACnB,KAAK,CAACL,IAAN,CAAWyB,GADY;AAEzBb,kBAAAA,IAAI,EAACD,QAAQ,CAACC,IAFW;AAGzBC,kBAAAA,KAAK,EAACF,QAAQ,CAACE,KAHU;AAIzBC,kBAAAA,MAAM,EAACH,QAAQ,CAACG,MAJS;AAKxBC,kBAAAA,WAAW,EAACJ,QAAQ,CAACI,WAAT,CAAqBW,OAArB,EALY;AAMzBV,kBAAAA,QAAQ,EAACL,QAAQ,CAACK;AANO,iBAAZ,CAFL;;AAAA;AAEPW,gBAAAA,GAFO;AAYbzB,gBAAAA,MAAM,CAACyB,GAAD,CAAN,CACGC,OADH,CACW,iBAAY;AAAA,sBAAVC,IAAU,SAAVA,IAAU;AAEnBnB,kBAAAA,OAAO,CAACQ,IAAR,CAAa,QAAb,EAAwBW,IAAxB;AAEA5B,kBAAAA,OAAO,CAAC2B,OAAR,CAAgBE,GAAhB;AAIA3B,kBAAAA,KAAK;AACN,iBAVH;;AAZa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAH;;AAAA,sBAANmB,MAAM;AAAA;AAAA;AAAA,OAAZ;;AAyBA,WAAO;AACLX,MAAAA,QAAQ,EAARA,QADK;AAELW,MAAAA,MAAM,EAANA,MAFK;AAGLjB,MAAAA,KAAK,EAALA,KAHK;AAILY,MAAAA,KAAK,EAALA;AAJK,KAAP;AAOD;AA9D4B,CAAD,CAA9B","sourcesContent":["import {defineComponent,reactive,watch} from 'vue';\n\nimport { book } from '@/service';\n\nimport { message } from 'ant-design-vue';\n\nimport { result, clone } from '@/helpers/utils';\n\nimport moment from 'moment';\n\nexport default defineComponent({\n  props: {\n     show: Boolean,\n     book: Object,\n  },\n\n  setup(props,context){\n      const editForm = reactive({\n        name:'',\n        price:0,\n        author:'',\n        publishDate:0,\n        classify:'',\n      });\n\n\n    const close = () => {\n      context.emit('update:show' , false);\n    };\n\n    watch(() => props.book,(current) => {\n\n      Object.assign(editForm, current);\n\n      editForm.publishDate = moment(Number(editForm.publishDate))\n\n\n\n    });\n\n    const submit = async () => {\n\n      const res = await book.update({\n          id:props.book._id,\n           name:editForm.name,\n           price:editForm.price,\n           author:editForm.author,\n            publishDate:editForm.publishDate.valueOf(),\n           classify:editForm.classify,\n\n      });\n\n      result(res)\n        .success(({data}) => {\n\n          context.emit('update' , data);\n           \n          message.success(msg);\n          \n          \n           \n          clone()\n        });\n    };\n\n    return {\n      editForm,\n      submit,\n      props,\n      close\n    };\n\n  },\n});\n"]}]}